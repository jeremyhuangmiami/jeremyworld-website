<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://fpyf8.com/88/tag.min.js" data-zone="159799" async data-cfasync="false"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J-Stream - Your Movie Streaming Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239CA3AF' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM6 46v-4H4v4H0v2h4v4h2v-4h4v-2H6zm0-20v-4H4v4H0v2h4v4h2v-4h4v-2H6zM36 0v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM6 10v-4H4v4H0v2h4v4h2v-4h4v-2H6zm30 10v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM16 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm30 0v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM16 4v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm30 0v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm10 24v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM46 10v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM16 54v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm30 0v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            background-repeat: repeat;
            background-attachment: fixed;
            background: radial-gradient(circle at top left, rgba(129, 230, 217, 0.05) 0%, transparent 40%),
                        radial-gradient(circle at bottom right, rgba(99, 179, 237, 0.05) 0%, transparent 40%),
                        linear-gradient(135deg, #10161d 0%, #1a202c 100%);
            background-blend-mode: overlay, overlay, normal;
        }

        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(45deg, #81e6d9, #63b3ed);
        }

        .backdrop-blur-lg {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .bg-opacity-40 {
            background-color: rgba(31, 41, 55, 0.4);
        }

        .aspect-video {
            aspect-ratio: 16 / 9;
        }
    </style>
</head>
<body class="text-gray-100 flex flex-col min-h-screen">

    <header class="bg-gray-900 bg-opacity-40 backdrop-blur-lg p-4 shadow-xl border-b border-blue-500/30 fixed w-full z-50">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-4xl font-extrabold rounded-lg px-3 py-1 text-gradient">
                <a href="index.html" class="hover:opacity-80 transition-opacity duration-300">Jeremy's World</a>
            </h1>
            <nav>
                <ul class="flex space-x-8">
                    <li><a href="index.html" class="text-lg font-semibold hover:text-teal-300 transition-colors duration-300 rounded-md px-4 py-2">Home</a></li>
                    <li><a href="projects.html" class="text-lg font-semibold hover:text-teal-300 transition-colors duration-300 rounded-md px-4 py-2">Projects</a></li>
                    <li><a href="https://login.jeremyworld.org" class="text-lg font-semibold hover:text-teal-300 transition-colors duration-300 rounded-md px-4 py-2">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="flex-grow py-12 px-4 pt-40">
        <section class="container mx-auto">
            <h2 class="text-4xl font-extrabold text-gradient mb-8 text-center mt-8">Explore Movies on J-Stream</h2>
            <div id="movie-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6"></div>
        </section>
    </main>

    <div id="movie-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="relative bg-gray-900 bg-opacity-80 backdrop-blur-xl p-6 rounded-lg shadow-2xl max-w-6xl w-full mx-4 border border-blue-500/30">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl font-bold transition-colors duration-300 z-10">×</button>
            <div class="aspect-video w-full">
                <video id="movie-player" controls playsinline class="w-full h-full rounded-lg"></video>
            </div>
            <h3 id="movie-title-in-modal" class="text-2xl font-bold text-gradient mt-4 text-center"></h3>
        </div>
    </div>

    <footer class="bg-gray-900 bg-opacity-40 backdrop-blur-lg text-gray-400 p-8 text-center border-t border-blue-500/30">
        <div class="container mx-auto">
            <p class="text-sm">© 2025 J-Stream. All rights reserved.</p>
            <div class="mt-4 text-base space-x-6">
                <a href="privacypolicy.html" class="text-gray-400 hover:text-teal-300 transition-colors duration-300">Privacy Policy</a>
                <a href="termsofservice.html" class="text-gray-400 hover:text-teal-300 transition-colors duration-300">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const movieGrid = document.getElementById('movie-grid');
            const movieModal = document.getElementById('movie-modal');
            const closeModalBtn = document.getElementById('close-modal');
            const moviePlayer = document.getElementById('movie-player');
            const movieTitleInModal = document.getElementById('movie-title-in-modal');

            // Initialize plyrInstance once globally
            let plyrInstance = null; 

            const movies = [
                {
                    title: "E.T. The Extra-Terrestrial",
                    image: "https://resizing.flixster.com/-XZAfHZM39UwaGJIFWKAE8fS0ak=/v3/t/assets/p10998_p_v13_au.jpg",
                    streamUrl: "https://archive.org/download/movies_20220526/E.T.The.Extra-Terrestrial.1982.1080p.BluRay.x265-RARBG.ia.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Paddington Two",
                    image: "https://image.tmdb.org/t/p/original/ns0BrPfPLoqToeafVv8FmjiUCG9.jpg",
                    streamUrl: "https://ia601405.us.archive.org/13/items/paddigton-2-2017-uhd.-blu-ray.-remux.-2160p/Paddigton%202%20%282017%29%20UHD.Blu-Ray.Remux.2160p.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Bee Movie",
                    image: "https://m.media-amazon.com/images/I/61Oz2ybjbCL._UF894,1000_QL80_.jpg",
                    streamUrl: "https://ia600208.us.archive.org/1/items/Popcornarchive-beeMovie2007_5no3y/Popcornarchive-beeMovie2007_5no3y.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Boss Baby",
                    image: "https://m.media-amazon.com/images/I/414wEkOZyWL.jpg",
                    streamUrl: "https://dn721603.ca.archive.org/0/items/the-boss-baby_202407/The%20Boss%20Baby.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Wall E",
                    image: "https://m.media-amazon.com/images/I/51RoZRgIHtL._UF894,1000_QL80_.jpg",
                    streamUrl: "https://ia800500.us.archive.org/9/items/0126422442/.../Wall.E.2008.1080p..WEB-DL.DDP5.1.Atmos.x264-POWER.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Cars",
                    image: "https://i.ebayimg.com/images/g/7AkAAOSwtYtkXANt/s-l400.jpg",
                    streamUrl: "https://ia800500.us.archive.org/9/items/0126422442/.../Cars.2006.1080p.DSNP.WEB-DL.DDP5.1.x264-POWER.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Toy Story",
                    image: "https://i.ebayimg.com/images/g/9fMAAOSwOzFhZOzF/s-l1200.jpg",
                    streamUrl: "https://ia800500.us.archive.org/9/items/0126422442/.../Toy.Story.1995.1080p.DSNP.WEB-DL.DDP5.1.Atmos.x264-POWER.mp4",
                    type: "video/mp4"
                },
                {
                    title: "UP",
                    image: "https://i.ebayimg.com/images/g/OLgAAOSwe-phZOzF/s-l1200.jpg",
                    streamUrl: "https://dn721609.ca.archive.org/0/items/0126422442/.../Up.2009.1080p.DSNP.WEB-DL.DDP5.1.HEVC-POWER.mp4",
                    type: "video/mp4"
                },
                {
                    title: "Passion Of The Christ",
                    image: "https://m.media-amazon.com/images/I/71zKDDYG-ZL.jpg",
                    streamUrl: "https://ia801006.us.archive.org/14/items/the-passion-of-the-christ-2004-1080p-blu-ray-x-264_202508/The%20Passion%20of%20the%20Christ%20%282004%29%20%281080p%20BluRay%20x264%29.mp4",
                    type: "video/mp4"
                }
            ];

            function createMovieTile(movie) {
                const tile = document.createElement('div');
                tile.className = 'cursor-pointer rounded-lg overflow-hidden shadow-lg transform hover:scale-105 transition-transform duration-300 bg-gray-800 bg-opacity-60 border border-blue-500/20';
                tile.innerHTML = `
                    <img src="${movie.image}" alt="${movie.title} Poster" class="w-full h-64 object-cover rounded-t-lg">
                    <div class="p-3">
                        <h3 class="text-md font-semibold text-gray-100 text-center">${movie.title}</h3>
                    </div>
                `;
                tile.addEventListener('click', () => {
                    movieTitleInModal.textContent = movie.title;
                    movieModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                    moviePlayer.muted = true; // Still a good idea to mute on open

                    // Update the source of the existing Plyr instance
                    // plyrInstance is already initialized once the DOM is loaded
                    plyrInstance.source = {
                        type: 'video',
                        sources: [{ src: movie.streamUrl, type: movie.type }]
                    };

                    plyrInstance.play();
                });
                return tile;
            }

            movies.forEach(movie => movieGrid.appendChild(createMovieTile(movie)));

            function closeModal() {
                movieModal.classList.add('hidden');
                if (plyrInstance) {
                    plyrInstance.stop();
                    // Do NOT destroy the plyrInstance here.
                    // Just reset the source if you want to clear the player.
                    plyrInstance.source = {
                        type: 'video',
                        sources: [{ src: '', type: 'video/mp4' }] // Clear the source
                    };
                }
                movieTitleInModal.textContent = '';
                document.body.style.overflow = '';
            }

            closeModalBtn.addEventListener('click', closeModal);
            movieModal.addEventListener('click', e => {
                if (e.target === movieModal) closeModal();
            });

            // Initialize Plyr once when the DOM is ready, but don't set a source yet
            // This ensures the Plyr UI is set up from the start
            plyrInstance = new Plyr(moviePlayer, {
                controls: ['play-large', 'play', 'progress', 'current-time', 'duration', 'mute', 'volume', 'fullscreen'],
                autoplay: false // Don't autoplay on initial load
            });
        });
    </script>
</body>
</html>
