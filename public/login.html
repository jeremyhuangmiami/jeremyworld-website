<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JeremyWorld Login</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <style>
    body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #111; color: #fff; }
    .container { width: 100%; max-width: 400px; padding: 2rem; background: #222; border-radius: 12px; }
    input, button { width: 100%; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; border: none; }
    button { background: #008CBA; color: white; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Login</h2>
    <form id="login-form">
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Sign In</button>
    </form>
    <p>Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>

    <form id="signup-form" style="display:none;">
      <input type="text" id="first-name" placeholder="First Name" required>
      <input type="text" id="last-name" placeholder="Last Name" required>
      <input type="email" id="signup-email" placeholder="Email" required>
      <input type="password" id="signup-password" placeholder="Password" required>
      <button type="submit">Sign Up</button>
    </form>
    <p><a href="#" id="show-login">Back to Login</a></p>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCyPk7d26WwhHM34MVbSHBMrnfSTtT213Y",
      authDomain: "jeremyworld-auth.firebaseapp.com",
      projectId: "jeremyworld-auth",
      storageBucket: "jeremyworld-auth.firebasestorage.app",
      messagingSenderId: "830728575641",
      appId: "1:830728575641:web:3d22b3b15127f0ae93f608"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const showSignup = document.getElementById('show-signup');
    const showLogin = document.getElementById('show-login');

    // Toggle forms
    showSignup.addEventListener('click', e => { e.preventDefault(); loginForm.style.display='none'; signupForm.style.display='block'; });
    showLogin.addEventListener('click', e => { e.preventDefault(); signupForm.style.display='none'; loginForm.style.display='block'; });

    // Login
    loginForm.addEventListener('submit', async e => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      try {
        await auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);
        await auth.signInWithEmailAndPassword(email, password);
        window.location.href = '/dashboard.html'; // Redirect after login
      } catch (err) { alert(err.message); }
    });

    // Signup
    signupForm.addEventListener('submit', async e => {
      e.preventDefault();
      const firstName = document.getElementById('first-name').value;
      const lastName = document.getElementById('last-name').value;
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      try {
        await auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        await userCredential.user.updateProfile({ displayName: firstName + ' ' + lastName });
        window.location.href = '/dashboard.html';
      } catch (err) { alert(err.message); }
    });

    // Protect dashboard redirect
    auth.onAuthStateChanged(user => {
      if (user && window.location.pathname === '/login.html') window.location.href='/dashboard.html';
    });
  </script>
</body>
</html>

